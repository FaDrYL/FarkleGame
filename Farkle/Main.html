<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Farkle Game</title>
</head>
<body>
    <h1>Farkle Game &#x2687&#x2689</h1>
    <p style="display:inline">Score: </p>
    <p id="score" style="display:inline">0</p>
    <br>
    <br>
    <script type="text/javascript" src="Support.js"></script>
    <script>
        var score = 0;
        var pendingScore = 0;
        var dice = [];
        var diceInt = [];
        var selections = [];
        var diceCopy = diceInt;
        var diceNum = 6;

        function getDice(){
            var j;
            for(let i = 0; i < diceNum; i++){
                j = parseInt(Math.random() * (diceNum - 1) + 1);
                diceInt[i] = j;
                switch(j){
                    case 1:
                        dice[i] = "\u2680";
                        break;
                    case 2:
                        dice[i] = "\u2681";
                        break;
                    case 3:
                        dice[i] = "\u2682";
                        break;
                    case 4:
                        dice[i] = "\u2683";
                        break;
                    case 5:
                        dice[i] = "\u2684";
                        break;
                    case 6:
                        dice[i] = "\u2685";
                        break;
                }
            }
            document.getElementById("dice").innerHTML = dice.toString().replace(/,/g, " ");
            diceCopy = diceInt;

            for(let i = 0; i < diceNum; i++){
                if(document.contains(document.getElementById("btn"+i))) {
                    var btnOld = document.getElementById("btn" + i);
                    btnOld.parentNode.removeChild(btnOld);
                }
            }

            for(let i = 0; i < diceInt.length; i++) {
                var btn = document.createElement("button");
                btn.innerHTML = diceInt[i];
                btn.setAttribute("id", "btn"+i);
                btn.style.width = '50px';
                btn.onclick = function(){ addSelection(diceInt[i]); };
                document.body.insertBefore(btn, document.getElementById("selections"));
            }
        }

        function cleanSelection(){
            selections = [];
            document.getElementById("selections").innerHTML = "Selected:";
            diceCopy = diceInt;
        }

        function addSelection(input){
            var index = diceCopy.indexOf(input);
            if(index > -1){
                diceCopy.splice(index, 1);
                selections.push(input);
                document.getElementById("selections").innerHTML += " "+input;
            }
            console.log(diceCopy);
        }
    </script>

    <button type="button" onclick="getDice()">roll dice</button>
    <button type="button" onclick="cleanSelection()">Clean selection</button>
    <br>
    <p id="dice" style="font-size: 50px">...</p>
    <!-- selection buttons -->
    <p id="selections">Selected:</p>
    <button type="button" onclick="getScore(selections)">Check Score</button>
</body>
</html>